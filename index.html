<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicativo de Finanças</title>
    <!-- Link para FontAwesome (biblioteca de ícones) -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        /* Estilos Globais */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            display: flex;
            flex: 1;
            flex-direction: row;
        }
        .half {
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .revenues {
            background-color: #c8e6c9;
            position: relative;
            transition: background-color 0.3s;
        }
        .expenses {
            background-color: #ffcdd2;
            position: relative;
            transition: background-color 0.3s;
        }
        .total {
            font-size: 24px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            position: sticky;
            top: 0;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
            margin-bottom: 10px;
        }
        .input-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .input-row input {
            padding: 5px;
        }
        .input-row input[type="text"] {
            flex: 2;
            margin-right: 10px;
        }
        .input-row input[type="number"] {
            width: 100px;
        }
        .result {
            font-size: 24px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Modo Escuro Mais Contrastante */
        body.dark-mode {
            background-color: #0e0e0e; /* Fundo escuro mais contrastante */
            color: #f5f5f5; /* Texto claro */
        }
        .dark-mode .revenues {
            background-color: #2b2b2b; /* Cor mais escura para o fundo das receitas */
        }
        .dark-mode .expenses {
            background-color: #3b3b3b; /* Cor mais escura para o fundo das despesas */
        }
        .dark-mode .total,
        .dark-mode .result {
            background-color: rgba(40, 40, 40, 0.8); /* Fundo contrastante para totai e resultado */
        }

        /* Cores Específicas */
        .revenue-text {
            color: green;
        }
        .dark-mode .revenue-text {
            color: #76ff03;
        }
        .expense-text {
            color: red;
        }

        /* Botões com Ícones */
        .toggle-button {
            position: fixed;
            bottom: 5px;
            right: 5px;
            padding: 10px 20px;
            background-color: #007bff; /* Azul para o modo claro */
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
            transition: background-color 0.3s;
        }

        .dark-mode .toggle-button {
            background-color: #333333; /* Ajustando para um cinza escuro no modo escuro */
        }

        .dark-mode .toggle-button {
            background-color: #bb86fc;
            position: fixed;
            bottom: 5px;
            right: 5px;
            display: block;
        }
        .revenue-button {
            background-color: #76ff03;
            padding: 10px;
            border: none;
            border-radius: 10px;
            color: #fff;
            margin-top: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .expense-button {
            background-color: tomato;
            padding: 10px;
            border: none;
            border-radius: 10px;
            color: #fff;
            margin-top: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .delete-button {
            background-color: #ff5252;
            padding: 8px 10px;
            border: none;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        input {
            border: none;
            background-color: transparent;
        }
        .dark-mode #revenuesInputs input {
            color: #76ff03;
        }
        .dark-mode .expenses input {
            color: tomato;
        }

        /* Melhorando a Responsividade */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .toggle-button {
                bottom: 20px;
                right: 20px;
            }

            .half {
                width: 100%;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>

<button class="toggle-button" onclick="toggleDarkMode()" id="toggle"><i class="fas fa-adjust"></i> Modo Escuro</button>

<div class="container">
    <div class="half revenues">
        <div class="total revenue-text" id="totalRevenues">Total Receitas: R$0.00</div>
        <div id="revenuesInputs"></div>
        <button onclick="addRevenue()" class="revenue-button"><i class="fas fa-plus"></i> Adicionar Receita</button>
    </div>
    <div class="half expenses">
        <div class="total expense-text" id="totalExpenses">Total Despesas: R$0.00</div>
        <div id="expensesInputs"></div>
        <button onclick="addExpense()" class="expense-button"><i class="fas fa-plus"></i> Adicionar Despesa</button>
    </div>
</div>

<div class="result" id="finalResult">Resultado: R$0.00</div>

<script>
    let revenues = [];
    let expenses = [];

    document.addEventListener('DOMContentLoaded', (event) => {
        loadData();
        checkDarkMode();
    });

    function addRevenue(name = '', value = '') {
        const inputRow = document.createElement('div');
        inputRow.className = 'input-row';
        const index = revenues.length;
        inputRow.innerHTML = `<input type="text" value="${name}" placeholder="Nome da Receita">
                              <input type="number" value="${value}" oninput="updateRevenues()" placeholder="R$">
                              <button class="delete-button" onclick="removeRevenue(${index})"><i class="fas fa-trash"></i></button>`;
        document.getElementById('revenuesInputs').appendChild(inputRow);
        updateRevenues();
    }

    function addExpense(name = '', value = '') {
        const inputRow = document.createElement('div');
        inputRow.className = 'input-row';
        const index = expenses.length;
        inputRow.innerHTML = `<input type="text" value="${name}" placeholder="Nome da Despesa">
                              <input type="number" value="${value}" oninput="updateExpenses()" placeholder="R$">
                              <button class="delete-button" onclick="removeExpense(${index})"><i class="fas fa-trash"></i></button>`;
        document.getElementById('expensesInputs').appendChild(inputRow);
        updateExpenses();
    }

    function removeRevenue(index) {
        revenues.splice(index, 1);  // Remove a receita da lista
        renderRevenues();  // Re-renderiza as receitas na interface
        updateRevenues();  // Atualiza os totais e o resultado final
        saveData();  // Salva os dados atualizados no localStorage
    }

    function removeExpense(index) {
        expenses.splice(index, 1);  // Remove a despesa da lista
        renderExpenses();  // Re-renderiza as despesas na interface
        updateExpenses();  // Atualiza os totais e o resultado final
        saveData();  // Salva os dados atualizados no localStorage
    }

    function renderRevenues() {
        const revenuesContainer = document.getElementById('revenuesInputs');
        revenuesContainer.innerHTML = '';  // Limpa a interface atual

        revenues.forEach((revenue, index) => {
            const inputRow = document.createElement('div');
            inputRow.className = 'input-row';
            inputRow.innerHTML = `<input type="text" value="${revenue.name}" placeholder="Nome da Receita">
                                  <input type="number" value="${revenue.value}" oninput="updateRevenues()" placeholder="R$">
                                  <button class="delete-button" onclick="removeRevenue(${index})"><i class="fas fa-trash"></i></button>`;
            revenuesContainer.appendChild(inputRow);
        });
    }

    function renderExpenses() {
        const expensesContainer = document.getElementById('expensesInputs');
        expensesContainer.innerHTML = '';  // Limpa a interface atual

        expenses.forEach((expense, index) => {
            const inputRow = document.createElement('div');
            inputRow.className = 'input-row';
            inputRow.innerHTML = `<input type="text" value="${expense.name}" placeholder="Nome da Despesa">
                                  <input type="number" value="${expense.value}" oninput="updateExpenses()" placeholder="R$">
                                  <button class="delete-button" onclick="removeExpense(${index})"><i class="fas fa-trash"></i></button>`;
            expensesContainer.appendChild(inputRow);
        });
    }

    function updateRevenues() {
        revenues = Array.from(document.querySelectorAll('#revenuesInputs .input-row')).map(row => {
            return {
                name: row.querySelector('input[type="text"]').value,
                value: parseFloat(row.querySelector('input[type="number"]').value) || 0
            };
        });
        const totalRevenues = revenues.reduce((acc, curr) => acc + curr.value, 0);
        document.getElementById('totalRevenues').innerText = `Total Receitas: R$${totalRevenues.toFixed(2)}`;
        updateFinalResult();
        saveData();
    }

    function updateExpenses() {
        expenses = Array.from(document.querySelectorAll('#expensesInputs .input-row')).map(row => {
            return {
                name: row.querySelector('input[type="text"]').value,
                value: parseFloat(row.querySelector('input[type="number"]').value) || 0
            };
        });
        const totalExpenses = expenses.reduce((acc, curr) => acc + curr.value, 0);
        document.getElementById('totalExpenses').innerText = `Total Despesas: R$${totalExpenses.toFixed(2)}`;
        updateFinalResult();
        saveData();
    }

    function updateFinalResult() {
        const totalRevenues = revenues.reduce((acc, curr) => acc + curr.value, 0);
        const totalExpenses = expenses.reduce((acc, curr) => acc + curr.value, 0);
        const finalResult = totalRevenues - totalExpenses;
        const finalResultElement = document.getElementById('finalResult');
        finalResultElement.innerText = `Resultado: R$${finalResult.toFixed(2)}`;

        // Mudar a cor do texto de acordo com o resultado (verde para positivo, vermelho para negativo, branco para neutro)
        if (finalResult > 0) {
            finalResultElement.style.color = 'green';
        } else if (finalResult < 0) {
            finalResultElement.style.color = 'red';
        } else {
            finalResultElement.style.color = 'white';
        }
    }

    function saveData() {
        localStorage.setItem('revenues', JSON.stringify(revenues));
        localStorage.setItem('expenses', JSON.stringify(expenses));
    }

    function loadData() {
        const savedRevenues = JSON.parse(localStorage.getItem('revenues')) || [];
        const savedExpenses = JSON.parse(localStorage.getItem('expenses')) || [];

        revenues = savedRevenues;  // Carrega as receitas para a lista
        expenses = savedExpenses;  // Carrega as despesas para a lista
        renderRevenues();  // Renderiza as receitas carregadas
        renderExpenses();  // Renderiza as despesas carregadas
    }

    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const darkModeEnabled = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', darkModeEnabled);

        // Atualizar o texto do botão com base no modo atual
        if (darkModeEnabled) {
            document.getElementById("toggle").textContent = "Modo Claro";
        } else {
            document.getElementById("toggle").textContent = "Modo Escuro";
        }
    }

    function checkDarkMode() {
        const darkMode = localStorage.getItem('darkMode') === 'true';
        if (darkMode) {
            document.body.classList.add('dark-mode');
            document.getElementById("toggle").textContent = "Modo Claro";  // Atualizar o texto do botão
        }
    }
</script>

</body>
</html>
